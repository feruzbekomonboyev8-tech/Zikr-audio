<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zikr AI</title>
    <style>
        :root { --green: #15803d; --light: #f0fdf4; }
        body { font-family: sans-serif; margin: 0; background: var(--light); padding-bottom: 80px; }
        .header { background: var(--green); color: white; padding: 15px; text-align: center; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; }
        .tab-content { display: none; padding: 15px; }
        .active { display: block; }
        .nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #ddd; }
        .nav-item { flex: 1; padding: 15px; text-align: center; font-size: 12px; cursor: pointer; color: #64748b; }
        #chat { height: 350px; overflow-y: auto; background: white; border-radius: 15px; padding: 15px; margin-bottom: 10px; border: 1px solid #e2e8f0; }
        .input-area { display: flex; gap: 8px; }
        input { flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 8px; outline: none; }
        .send-btn { background: var(--green); color: white; border: none; padding: 10px 15px; border-radius: 8px; }
        .msg { margin: 8px 0; padding: 10px; border-radius: 10px; display: block; max-width: 85%; }
        .msg-user { background: #e2e8f0; align-self: flex-end; margin-left: auto; }
        .msg-ai { background: var(--green); color: white; }
    </style>
</head>
<body>

<div class="header"><h2>Zikr AI</h2></div>

<div id="ai" class="tab-content active">
    <div id="chat">
        <div class="msg msg-ai">Assalomu alaykum! Men Zikr AI yordamchisiman. Dilingizdagini yozing, men sizga tasalli beruvchi zikr yoki sura topib beraman.</div>
    </div>
    <div class="input-area">
        <input type="text" id="userMsg" placeholder="Shu yerga yozing...">
        <button class="send-btn" onclick="askAI()">Yuborish</button>
    </div>
</div>

<div class="nav">
    <div class="nav-item" onclick="alert('Alifbo tayyorlanmoqda...')">ðŸ“– Alifbo</div>
    <div class="nav-item" onclick="alert('Namoz bo\'limi tayyorlanmoqda...')">ðŸ•Œ Namoz</div>
    <div class="nav-item" onclick="showTab('ai')" style="color: #15803d; font-weight: bold;">ðŸ¤– Zikr AI</div>
</div>

<script>
    async function askAI() {
        const msg = document.getElementById('userMsg').value;
        const chat = document.getElementById('chat');
        if(!msg) return;

        chat.innerHTML += `<div class="msg msg-user">${msg}</div>`;
        document.getElementById('userMsg').value = "";
        chat.scrollTop = chat.scrollHeight;

        const apiKey = "AIzaSyDt0J2QCnOZzqERvSyut-2cg1YtkCMdQpk"; 
        const systemPrompt = "Sening isming - Zikr AI. Sen mehribon, dindoshlariga ruhiy yordam beruvchi oqila yordamchisan. Foydalanuvchi siqilsa, unga Qur'on oyatlari va zikrlar bilan tasalli ber. O'zingni Google yoki Gemini deb tanishtirma. Maxfiy bo'l.";

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`, {
                method: "POST",
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    contents: [{ parts: [{ text: systemPrompt + " Foydalanuvchi dedi: " + msg }] }]
                })
            });

            const data = await response.json();
            const reply = data.candidates[0].content.parts[0].text;
            chat.innerHTML += `<div class="msg msg-ai">${reply}</div>`;
            chat.scrollTop = chat.scrollHeight;
        } catch (e) {
            chat.innerHTML += `<div style="color:red">Aloqa uzildi. Qaytadan urinib ko'ring.</div>`;
        }
    }

    function showTab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }
</script>

</body>
</html>
